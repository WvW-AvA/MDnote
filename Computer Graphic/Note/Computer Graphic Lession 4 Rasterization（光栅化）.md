# Computer Graphic Lession 4 Rasterization（光栅化）

​	在上回，我们成功把三角形从三维空间投影到二维空间，那么接下来，我们就要考虑怎样将这三个点填充成三角形，并显示出来。

​	众所周知，屏幕都是由一个一个像素点组成的，我们要将想象中的一个连续的三角形画在离散的屏幕上，就要经过采样这一步。

#### 判断点是否在三角形内

##### （推荐）重心坐标判别法

算出该点相对于三角形的重心坐标，若α，β，γ都大于零，则得出该点在三角形内。

重心坐标的详细内容间下一篇。

#### 光栅化

光栅化的过程就是就要遍历像素点，并判断该点是否在三角形内，再对其进行着色。

遍历屏幕上的每一个像素点消耗太大了，有没有什么比较好的方法呢。

事实上，只需根据三角形的一些特性，限制一下范围，就能极大得优化开销。

顾名思义，限制盒就是用一个矩形区域将三角形包起来，只需遍历矩形区域内的像素就好。

<img src="picture\2021-08-23_114146.png" alt="img" style="zoom:38%;" />

另外，我们也可以直接确立三角形的边界，直接渲染。

<img src="picture\2021-08-23_114203.png" alt="img" style="zoom:38%;" />



但是这样有一些比较明显的问题，就是锯齿。

<img src="picture\2021-08-21_114417.png" alt="img" style="zoom:38%;" />

实际上渲染的本质就是一个在2D平面上采样的过程，锯齿产生的原因是走样，因此要解决锯齿的问题，我们要了解一下采样原理。

#### 基本采样原理（Sample-theory)

走样的本质可以用一句话来概括，

（Signals are changing too fast(high frequency),but sample too slowly）

信号变化得太快了，而采样的频率跟不上信号的变化。

因此可以得出两种解决问题的思路，砍掉高频信号和提高采样的频率。

砍掉高频信号后，原信号就会变得平缓，2D图像表现为边界被模糊化。

<img src="picture\2021-08-21_123046.png" alt="ing" style="zoom:38%;" />

提高采样率就是增加像素点的个数，对应超分辨率技术。

#### 反走样（Antialiasing）

这两种思路的具体实现是什么样的呢，模糊边界的基本原理是对时域卷积操作，再2d图像上的表现为一个方形的采样滑块，划过每一个像素，计算平均值。

<img src="picture\2021-08-23_121101.png" alt="img" style="zoom:38%;" />

但是在图形学中我们不能先采样生成2d图像之后再用2d图像的卷积操作，应该在采样之前就进行卷积。

#### 超分辨率Multi Sample Antialiasing（MSAA）

顾名思义就是更多的采样点，将一个像素分割成多个像素。

<img src="picture\2021-08-23_143639.png" alt="img" style="zoom:38%;" /><img src="picture\2021-08-23_143734.png" alt="img" style="zoom:40%;" />

